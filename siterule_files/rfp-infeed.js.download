!function(){function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}return e}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractAdController=void 0;var o=e("./util"),i=e("../rfp-infeed/ad_info_model"),r=e("./network_ad"),s=function(){function e(e){this.loadedAds=[],this.rawRes={},this.spotId=e.spotId,this.deviceId=e.deviceId,this.customData=e.data}return e.prototype.notifyImp=function(e,t){if(!e||"0"===e||!parseInt(String(e),10)&&"string"!=typeof e)throw new TypeError("ad_id is required");var n=this.getAdInfoById(e);if(!n)throw new TypeError("invalid ad id "+e);r.NetworkAd.notifyImp(this.spotId,n),r.NetworkAd.notifyTpImp(n,t)},e.prototype.getLoadedAds=function(){return o.Util.map(this.loadedAds,function(e){return(0,i.implementsBuildAdInfoModelObjectPublic)(e)?e.toObjectWithPublicParams():e})},e.prototype.getRawRes=function(){return this.rawRes},e.prototype.getAdInfoById=function(e){for(var t=0,n=this.loadedAds.length;t<n;t++){var o=this.loadedAds[t];if(o instanceof i.AdInfoModel&&o.toObject().ad_id===e)return o}return null},e}();n.AbstractAdController=s},{"../rfp-infeed/ad_info_model":16,"./network_ad":10,"./util":13}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdElementAttributeParser=void 0;var o={"data-rfp-video-width":"videoWidth","data-rfp-video-height":"videoHeight","data-rfp-video-on-ended":"videoOnEnded","data-rfp-video-close-button":"videoCloseButton","data-rfp-video-optout-button":"videoOptoutButton","data-rfp-video-on-no-ads":"videoOnNoAds","data-rfp-video-loop":"videoLoop"},i=function(){function e(){}return e.parse=function(e){var t={};for(var n in o)if(Object.prototype.hasOwnProperty.call(o,n)){var i=e.getAttribute(n);if(i){var r=o[n];t[r]=i}}return t},e}();n.AdElementAttributeParser=i},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdInfoModelBase=void 0;var o=e("./network_ad"),i=e("./util"),r=function(){function e(e,t,n){this.base_info=this.store(e,t,n)}return e.prototype.store=function(t,n,r){var s={};return i.Util.forEach(e.base_keys,function(e){s[e]=t[e]}),s.click_url=o.NetworkAd.buildClickRequestUrl(n,t,r),s},e.base_keys=["advertiser_id","ad_id","title","description","optout_click","dat","conv_type","session_id","url_scheme","cta_text","click_url","creative_html","creative_width","creative_height"],e}();n.AdInfoModelBase=r},{"./network_ad":10,"./util":13}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ApiStatus=n.ApiResponse=void 0;var o={SUCCESS:"success",FAILURE:"failure"};n.ApiStatus=o;var i=function(){function e(e,t,n,o){this.status=e,this.data=t,this.contentType=n,this.error=o}return e.success=function(t,n){return new e(o.SUCCESS,t,n)},e.failure=function(t,n){return new e(o.FAILURE,n,null,t)},e}();n.ApiResponse=i},{}],5:[function(e,t,n){"use strict";e("../rfp-common/rfp").RFP.arguments=function(){for(var e=document.getElementsByTagName("script"),t=e[e.length-1].src,n=t.substring(t.indexOf("?")+1),o=n.split("&"),i={},r=0,s=o;r<s.length;r++){var a=s[r],l=a.split("="),d=decodeURIComponent(l[0]),u=decodeURIComponent(l[1]);i[d]=u}return i}()},{"../rfp-common/rfp":12}],6:[function(e,t,n){"use strict";var o=e("../rfp-common/rfp");o.RFP.Common=o.RFP.Common||{},function(){if(o.RFP.arguments.country){var e=o.RFP.arguments.country,t=o.RFP.Common.Locale.Config[e];if(t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o.RFP.Common.Config[n]=t[n])}}()},{"../rfp-common/rfp":12}],7:[function(e,t,n){"use strict";e("../rfp").RFP.Common.Locale.Config.ir={host:{ad:"ad-ir.rfp.fout.jp",imp:"imp-ir.rfp.fout.jp",click:"click-ir.rfp.fout.jp",conv:"conv-ir.rfp.fout.jp",assets:"js-ir.rfp.fout.jp"}}},{"../rfp":12}],8:[function(e,t,n){"use strict";var o=e("./rfp");o.RFP.Common=o.RFP.Common||{},o.RFP.Common.Locale=o.RFP.Common.Locale||{},o.RFP.Common.Locale.Config=o.RFP.Common.Locale.Config||{},o.RFP.Common.Config={host:{ad:"ad.rfp.fout.jp",imp:"imp.rfp.fout.jp",click:"click.rfp.fout.jp",conv:"conv.rfp.fout.jp",assets:"js.rfp.fout.jp"},protocol:"https:",ad_type:{infeed:5,display:14},version:"1.2.32",conv:{max_request_per_page:10},jsonp_timeout_ms:1e4,optout_url:"https://js.fout.jp/info/privacy.html"}},{"./rfp":12}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InViewObserver=void 0;var o=e("./util"),i=function(){function e(e){void 0===e&&(e=.5);var t={rootMargin:"0px",threshold:e};this.observer=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting?o.Util.emit("enter",e.target):o.Util.emit("exit",e.target)})},t)}return e.prototype.addElement=function(e){this.observer.observe(e)},e.prototype.removeElement=function(e){this.observer.unobserve(e)},e}(),r=function(){function e(e){void 0===e&&(e=.5),this.threshold=e,this.elements=[],this.interval=100,this.observe()}return e.prototype.addElement=function(e){this.elements.indexOf(e)<0&&this.elements.push(e)},e.prototype.removeElement=function(e){var t=this.elements.indexOf(e);t>=0&&this.elements.splice(t,1)},e.prototype.observe=function(){var e=this,t=[],n=function(){e.elements.forEach(function(n){var i=o.Util.inView(n,e.threshold),r=t.indexOf(n),s=r>-1,a=i&&!s,l=!i&&s;a&&(t.push(n),o.Util.emit("enter",n)),l&&(t.splice(r,1),o.Util.emit("exit",n))})};if(["scroll","resize","load"].forEach(function(t){try{window.top.addEventListener(t,o.Util.throttle(n,e.interval))}catch(i){window.addEventListener(t,o.Util.throttle(n,e.interval))}}),"MutationObserver"in window){var i={attributes:!0,childList:!0,subtree:!0},r=new MutationObserver(o.Util.throttle(n,this.interval));try{window.top.addEventListener("DOMContentLoaded",function(){r.observe(document.body,i)})}catch(e){window.addEventListener("DOMContentLoaded",function(){r.observe(document.body,i)})}}window.setTimeout(n,0)},e}(),s=function(){function e(){}return e.addElement=function(e,t){this.getObserverBySlot(t).addElement(e)},e.removeElement=function(e,t){this.getObserverBySlot(t).removeElement(e)},e.getObserverBySlot=function(e){return e in this.observers||(this.observers[e]=new this.ObserverConstructor),this.observers[e]},e.ObserverConstructor="IntersectionObserver"in window?i:r,e.observers={},e}();n.InViewObserver=s},{"./util":13}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkAd=void 0;var o=e("./network_base"),i=e("./rfp"),r=e("./util"),s=e("./api_response"),a=e("../rfp-infeed/vast"),l=e("./vast_ad_wrapper_resolver"),d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.fetchAds=function(e,t,n,o,i){var d=this,u=function(e){var u;if(e.status===s.ApiStatus.FAILURE)return void o(e.error);if("application/xml"===(null===(u=e.contentType)||void 0===u?void 0:u.split(";")[0].trim())){var c=e.data,p=a.VAST.parse(c);if(p.ads.length>0&&p.ads[0]instanceof a.VASTAdWrapperModel){var f=p.ads[0],v=new l.VASTAdWrapperResolver(p,o),h=f,m=function(e){v.resolve(e,h)};d.sendAjaxRequest(f.uri,m)}else o(null,p)}else{var c=e.data;try{var y=r.Util.jsonParse(c),g=y.items,b=r.Util.map(g,function(e){return new n(e,t,i)});o(null,b,y)}catch(e){o(e)}}};this.callJsonAPI(e,u,t)},t.notifyImp=function(e,t,n){var o=this.buildImpRequestUrl(e,t,n);this.sendBeaconRequest(o)},t.notifyTpImp=function(e,t){var n=this,o=e.toObject(),i=o.tp_imp_urls;if(i&&r.Util.isArray(i)&&i.length>0&&r.Util.forEach(i,function(e){n.sendBeaconRequest(e)}),t instanceof HTMLElement){var s=o.tp_imp_scripts;s&&r.Util.isArray(s)&&s.length>0&&r.Util.forEach(s,function(e){n.sendRequestViaImpScript(e,t)})}},t.callSyncURLs=function(e){var n=this;if(Object.prototype.hasOwnProperty.call(e,"sync_urls")){var o=e.sync_urls;r.Util.isArray(o)&&0!==o.length&&r.Util.forEach(o,function(e){t.syncedURLs[e]||(n.sendBeaconRequest(e),t.syncedURLs[e]=!0)})}},t.callSyncIFrameURLs=function(e){var n=this;if(Object.prototype.hasOwnProperty.call(e,"sync_iframe_urls")){var o=e.sync_iframe_urls;r.Util.isArray(o)&&0!==o.length&&r.Util.forEach(o,function(e){t.syncedURLs[e]||(n.sendRequestViaIFrame(e),t.syncedURLs[e]=!0)})}},t.callSyncScriptURLs=function(e){var n=this;if(Object.prototype.hasOwnProperty.call(e,"sync_script_urls")){var o=e.sync_script_urls;r.Util.isArray(o)&&0!==o.length&&r.Util.forEach(o,function(e){t.syncedURLs[e]||(n.sendRequestViaScript(e),t.syncedURLs[e]=!0)})}},t.buildAdRequestUrl=function(e){var t=i.RFP.Common.Config;return t.protocol+"//"+t.host.ad+"/ad?"+e.join("&")},t.buildImpRequestUrl=function(e,t,n){var o=i.RFP.Common.Config,s=t.toObject(),a=["adspot_id="+encodeURIComponent(e),"dat="+s.dat,"session_id="+s.session_id,"ad_id="+s.ad_id,"cachebuster="+this.makeCacheBuster(),"sdk_version="+o.version];if(r.Util.isObject(n)&&n.device_id){var l=btoa(unescape(encodeURIComponent(n.device_id)));a.push("audience_id="+encodeURIComponent(l)),a.push("audience_id_type=0")}return o.protocol+"//"+o.host.imp+"/imp?"+a.join("&")},t.buildClickRequestUrl=function(e,t,n){var o=i.RFP.Common.Config,s=t,a=["adspot_id="+encodeURIComponent(e),"dat="+s.dat,"session_id="+s.session_id,"ad_id="+s.ad_id,"redirect_url="+encodeURIComponent(s.redirect_url),"cachebuster="+this.makeCacheBuster(),"sdk_version="+o.version];if(r.Util.isObject(n)&&n.device_id){var l=btoa(unescape(encodeURIComponent(n.device_id)));a.push("audience_id="+encodeURIComponent(l)),a.push("audience_id_type=0")}return a.push("rd="),o.protocol+"//"+o.host.click+"/click?"+a.join("&")},t.syncedURLs={},t}(o.NetworkBase);n.NetworkAd=u},{"../rfp-infeed/vast":24,"./api_response":4,"./network_base":11,"./rfp":12,"./util":13,"./vast_ad_wrapper_resolver":14}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkBase=void 0;var o=e("./rfp"),i=e("./api_response"),r=function(){function e(){}return e.makeCacheBuster=function(){return Math.floor(1e13*Math.random())},e.sendRequest=function(t){var n=e._createRequestInstance();n&&(n.open("GET",t,!0),n.withCredentials=!0,n.send())},e.sendBeaconRequest=function(e){(new Image).src=e},e.sendRequestViaImpScript=function(e,t){for(var n,o=(new DOMParser).parseFromString(e,"text/html"),i=o.getElementsByTagName("script"),r=0;r<i.length;r++){for(var s=i[r],a=s.attributes,l=document.createElement("script"),d=0;d<a.length;d++)l.setAttribute(a[d].name,null!==(n=a[d].nodeValue)&&void 0!==n?n:"");l.innerHTML=s.innerHTML,t.appendChild(l)}},e.sendRequestViaIFrame=function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t)},e.sendRequestViaScript=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.body.appendChild(t)},e.callJsonAPI=function(t,n,o){e._supportXHR2()?e.sendAjaxRequest(t,n):e.sendJSONPRequest(t,n,o)},e.sendAjaxRequest=function(t,n){var o=e._createRequestInstance();o&&(o.onload=function(){try{var e=o.responseText,t=function(e){return"getResponseHeader"in e?e.getResponseHeader("Content-Type"):"contentType"in e?e.contentType:void 0}(o);n(i.ApiResponse.success(e,t))}catch(e){return void n(i.ApiResponse.failure(e))}},o.onerror=function(){n(i.ApiResponse.failure(new Error("Network error")))},o.ontimeout=function(){n(i.ApiResponse.failure(new Error("Network timeout")))},o.onprogress=function(){},o.open("GET",t),o.withCredentials=!0,o.send())},e.sendJSONPRequest=function(t,n,r){var s="rfp-jsonp-"+r;if(!document.getElementById(s)){var a=e._buildJSONPCallbackName(r),l=t+"&callback="+encodeURIComponent("RFP."+a),d=e._buildScriptElement(l,s),u=o.RFP.Common.Config.jsonp_timeout_ms,c=window.setTimeout(function(){o.RFP[a]=function(){},n(i.ApiResponse.failure(new Error("Ad request timeout")))},u);o.RFP[a]=e._buildJSONPCallback(c,d,a,n),e._appendScriptElement(d)}},e._supportXHR2=function(){var e,t=navigator.userAgent.toLowerCase(),n=/(msie) ([\w.]+)/.exec(t)||[];return!(parseInt(null!==(e=n[2])&&void 0!==e?e:"99",10)<=7)&&("XDomainRequest"in window||"XMLHttpRequest"in window)},e._createRequestInstance=function(){return XMLHttpRequest&&"withCredentials"in XMLHttpRequest.prototype?new XMLHttpRequest:window.XDomainRequest?new window.XDomainRequest:null},e._buildJSONPCallbackName=function(e){return"AdJSONPCallback_"+e},e._buildScriptElement=function(e,t){var n=document.createElement("script");return n.src=e,n.id=t,n.type="text/javascript",n.async=!0,n.charset="utf-8",n},e._appendScriptElement=function(e){var t,n=document.getElementsByTagName("script")[0];null===(t=null===n||void 0===n?void 0:n.parentNode)||void 0===t||t.insertBefore(e,n)},e._buildJSONPCallback=function(e,t,n,r){return function(s){var a;return clearTimeout(e),null===(a=t.parentNode)||void 0===a||a.removeChild(t),delete o.RFP[n],r(i.ApiResponse.success(s,null))}},e}();n.NetworkBase=r},{"./api_response":4,"./rfp":12}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RFP=void 0;var o=void 0===window.RFP?{}:window.RFP;n.RFP=o,window.RFP=o},{}],13:[function(require,module,exports){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=void 0;var Util=function(){function Util(){}return Util.forEach=function(e,t,n){if(Array.prototype.forEach)return Array.prototype.forEach.call(e,t,n);if(void 0===e)throw new TypeError;if("function"!=typeof t)throw new TypeError;e=[].slice.call(e);for(var o=e.length>>>0,i=0;i<o;i++)i in e&&t.call(n,e[i],i,e)},Util.map=function(e,t,n){if(Array.prototype.map)return Array.prototype.map.call(e,t,n);if(void 0===e)throw new TypeError;if("function"!=typeof t)throw new TypeError;e=[].slice.call(e);for(var o=e.length>>>0,i=[],r=0;r<o;r++)r in e&&(i[r]=t.call(n,e[r],r,e));return i},Util.objectSeal=function(e){return Object.seal?Object.seal(e):e},Util.jsonParse=function(jsonStr){return window.JSON?window.JSON.parse(jsonStr):eval("("+jsonStr+")")},Util.waitDomReady=function(e){function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}e()}var n=!1;if("complete"===document.readyState)return void e();if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){e(),n=!0},!1),window.addEventListener("load",function(){n||e()},!1);else if(window.attachEvent)window.ActiveXObject&&window===window.top?t():window.attachEvent("onload",e);else{var o=window.onload;window.onload=function(t){"function"==typeof o&&o.call(window,t),e()}}},Util.extend=function(e,t){for(var n in t)e[n]=t[n];return e},Util.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.baseConstructor=t},Util.isObject=function(e){var t=_typeof(e);return"function"===t||"object"===t&&!!e},Util.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Util.isSmartPhone=function(e){void 0===e&&(e=window.navigator.userAgent);var t=e.toLowerCase();return-1!==t.indexOf("iphone")||-1!==t.indexOf("ipad")||-1!==t.indexOf("ipod")||-1!==t.indexOf("android")},Util.isTruthyString=function(e){return"string"!=typeof e?!!e:-1===["","0","false"].indexOf(e.trim())},Util.throttle=function(e,t){var n=this;void 0===t&&(t=0),t=+t||0;var o=Date.now(),i=o;return function(){var r=Date.now();(i+t-r<0||r-o<t)&&(e.apply(n),i=Date.now())}},Util.on=function(e,t){Util.handlers[e]||(Util.handlers[e]=[]),Util.handlers[e].push(t)},Util.one=function(e,t){Util.signals[e]||(Util.signals[e]=[]),Util.signals[e].push(t)},Util.off=function(e,t){if(Util.handlers[e])if(t){var n=Util.handlers[e].findIndex(t);n>=0&&Util.handlers[e].splice(n,1)}else Util.handlers[e]=[];if(Util.signals[e])if(t){var n=Util.signals[e].findIndex(t);n>=0&&Util.signals[e].splice(n,1)}else Util.handlers[e]=[]},Util.emit=function(e,t){if(Util.signals[e])for(;Util.signals[e].length;){var n=Util.signals[e].pop();Util.isFunction(n)&&n(t)}if(Util.handlers[e])for(var o=Util.handlers[e].length;--o>-1;)Util.handlers[e][o](t)},Util.inView=function(e,t){var n=e.getBoundingClientRect(),o={t:n.bottom,r:window.innerWidth-n.left,b:window.innerHeight-n.top,l:n.right},i={x:t*n.width,y:t*n.height};return o.t>i.y&&o.r>i.x&&o.b>i.y&&o.l>i.x},Util.handlers={},Util.signals={},Util}();exports.Util=Util},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VASTAdWrapperResolver=void 0;var o=e("../rfp-infeed/vast"),i=e("./api_response"),r=e("./network_base"),s=function(){function e(e,t){this.root=e,this.callback=t,this.hops=0}return e.prototype.resolve=function(t,n){var s,a=this;if(this.hops++,t.status===i.ApiStatus.FAILURE)return void this.callback(t.error);if("application/xml"!==(null===(s=t.contentType)||void 0===s?void 0:s.split(";")[0].trim()))return void this.callback(new TypeError("VAST Wrapper: Invalid response"),null);var l=t.data,d=o.VAST.parse(l);if(n.root=d,d.ads.length>0&&d.ads[0]instanceof o.VASTAdWrapperModel){var u=d.ads[0];if(this.hops>=e.HOP_LIMIT)return void this.callback(new TypeError("VAST Wrapper: Hop limit"),null);var c=function(e){a.resolve(e,u)};r.NetworkBase.sendAjaxRequest(u.uri,c)}else this.callback(null,this.root)},e.HOP_LIMIT=5,e}();n.VASTAdWrapperResolver=s},{"../rfp-infeed/vast":24,"./api_response":4,"./network_base":11}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdController=void 0;var o=e("./ad_view"),i=e("./network"),r=e("./placement_info_model"),s=e("./video-ad-view"),a=e("../rfp-common/ad_controller"),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(e){function t(t){var n=e.call(this,{spotId:t.adspot_id,deviceId:t.device_id,data:t.data})||this;return n.placementInfo={},n.requestSequence=0,n}return l(t,e),t.prototype.loadAds=function(e){var t=this,n=this.spotId,o=this.requestSequence,s={deviceId:this.deviceId,customData:this.customData};i.Network.fetchInFeedAds(n,o,function(o,i,s){if(o)return void(null===e||void 0===e||e(o));var a=new r.PlacementInfoModel(null!==s&&void 0!==s?s:{},n);t.loadedAds=t.loadedAds.concat(i),t.requestSequence++,t.placementInfo=a,t.rawRes=null!==s&&void 0!==s?s:{},null===e||void 0===e||e(null)},s)},t.prototype.getPlacementInfo=function(){return"function"!=typeof this.placementInfo.toObject?{}:this.placementInfo.toObject()},t.prototype.showAd=function(e,t){var n;if(e instanceof o.AdView||e instanceof s.VideoAdView){if(!t)return;var i=this.getAdInfoById(t);if(null===i)return;var r=i.toObjectWithPublicParams(),a=null!==(n=this.getPlacementInfo())&&void 0!==n?n:{};return e.show(r,a)}return e.show()},t}(a.AbstractAdController);n.AdController=d},{"../rfp-common/ad_controller":1,"./ad_view":17,"./network":19,"./placement_info_model":22,"./video-ad-view":25}],16:[function(e,t,n){"use strict";function o(e){return a.Util.isObject(e)&&Object.prototype.hasOwnProperty.call(e,"ad_id")}function i(e){return null!==e&&a.Util.isObject(e)&&a.Util.isFunction(e.toObject)}function r(e){return null!==e&&a.Util.isObject(e)&&a.Util.isFunction(e.toObjectWithPublicParams)}Object.defineProperty(n,"__esModule",{value:!0}),n.AdInfoModel=void 0,n.implementsAdInfoModelObjectPublic=o,n.implementsBuildAdInfoModelObject=i,n.implementsBuildAdInfoModelObjectPublic=r;var s=e("../rfp-common/ad_info_model_base"),a=e("../rfp-common/util"),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i.info=i.storeExtended(t),i}return l(t,e),t.prototype.toObject=function(){return this.info},t.prototype.toObjectWithPublicParams=function(){var e=this,n={};return a.Util.forEach(t.publicKeys,function(t){n[t]=e.info[t]}),n},t.prototype.storeExtended=function(e,n){var o=this.base_info;return a.Util.forEach(t.keys,function(t){o[t]=e[t]}),a.Util.objectSeal(o)},t.keys=["main_image_url","displayed_advertiser","tp_imp_urls","tp_imp_scripts","vast_xml"],t.publicKeys=["title","description","click_url","ad_id","main_image_url","displayed_advertiser","optout_click","vast_xml","cta_text","creative_html","creative_width","creative_height"],t}(s.AdInfoModelBase);n.AdInfoModel=d},{"../rfp-common/ad_info_model_base":3,"../rfp-common/util":13}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdView=void 0;var o=e("../rfp-common/util"),i=function(){function e(e,t,n){this.showed=!1,this.template=t,this.el=e,this.options=o.Util.isObject(n)?n:{},this.showed=!1}return e.prototype.show=function(e,t){if(!this.el.parentNode)return void(window.console&&"function"==typeof console.info&&console.info("The ad place not found. Multiple loading tag may have been placed at same page."));o.Util.isFunction(this.options.before_render)&&(e=this.options.before_render(e,t));var n=o.Util.extend({},e);"string"==typeof n.main_image_url&&(n.creative_block_element='<div class="rfp-creative-block-element"><img src="'+e.main_image_url+'" /></div>');var i=this.template.render(n),r=this.buildHtmlDomList(i),s=this.swapTagToAd(r);return this.showed=!0,s},e.prototype.buildHtmlDomList=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},e.prototype.swapTagToAd=function(e){var t,n,o=e.length,i=this.el.parentElement;if(this.options.use_wrapper)if(o>1){for(var r=document.createElement("div"),s=0;s<o;s++)r.appendChild(e[s].cloneNode(!0));n=null===i||void 0===i?void 0:i.insertBefore(r,this.el)}else{var a=e[0].cloneNode(!0);n=null===i||void 0===i?void 0:i.insertBefore(a,this.el)}else{for(var s=0;s<o;s++)null===i||void 0===i||i.insertBefore(e[s].cloneNode(!0),this.el);n=null===(t=this.el.parentNode)||void 0===t?void 0:t.children}return null===i||void 0===i||i.removeChild(this.el),n},e}();n.AdView=i},{"../rfp-common/util":13}],18:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=e("../rfp-common/in_view_observer"),r=e("../rfp-common/rfp"),s=e("../rfp-common/util"),a=e("./ad_controller"),l=e("./ad_view"),d=e("./network"),u=e("./passback_ad_view"),c=e("./template"),p=e("./ad_info_model"),f=e("./video-ad-view"),v=e("../rfp-common/ad_element_attribute"),h=e("./vast"),m=e("./offline_ad_controller");r.RFP.InFeed=void 0===r.RFP.InFeed?{}:r.RFP.InFeed,r.RFP.InFeed.Default=function(){function e(){if(document.querySelectorAll)return document.querySelectorAll("[data-rfp-adspot-id]");for(var e=[],t=document.body.getElementsByTagName("*"),n=t.length,o=0;o<n;o++)t[o].getAttribute("data-rfp-adspot-id")&&e.push(t[o]);return e}function t(e){if(document.querySelectorAll)return document.querySelectorAll("[data-rfp-adspot-id="+e+"]");for(var t=[],n=document.body.getElementsByTagName("*"),o=n.length,i=0;i<o;i++){(n[i].getAttribute("data-rfp-adspot-id")||"")===e&&t.push(n[i])}return t}function n(e){var n=t(e);s.Util.forEach(n,function(e){e.removeAttribute("data-rfp-adspot-id")})}function r(){return window.context}function y(){var e=r();e&&s.Util.isFunction(e.noContentAvailable)&&e.noContentAvailable()}function g(e){var t={};if(e instanceof HTMLElement&&!(e instanceof HTMLIFrameElement)){var n=e.getBoundingClientRect();n.width>0&&(t.width=n.width),n.height>0&&(t.height=n.height)}var o=r();o&&s.Util.isFunction(o.renderStart)&&o.renderStart(t)}function b(e){return"string"==typeof e.vast_xml||e instanceof h.VASTModel}function _(){s.Util.on("enter",function(e){s.Util.isFunction(e.rfpNotifyImpression)&&(e.rfpInViewTimerId&&(clearTimeout(e.rfpInViewTimerId),delete e.rfpInViewTimerId),e.rfpInViewTimerId=setTimeout(function(){e.rfpNotifyImpression(),delete e.rfpNotifyImpression,delete e.rfpInViewTimerId,i.InViewObserver.removeElement(e,"viewable-impression")},1e3))}),s.Util.on("exit",function(e){e.rfpInViewTimerId&&(clearTimeout(e.rfpInViewTimerId),delete e.rfpInViewTimerId)})}function w(e){var t=[];if(document.querySelectorAll)t=document.querySelectorAll('script[type="text/rfp-infeed-template"]');else for(var n=document.getElementsByTagName("script"),o=n.length,i=0;i<o;i++){var r=n[i].getAttribute("type")||"";"text/rfp-infeed-template"===r&&t.push(n[i])}for(var s=t.length,i=0;i<s;i++)if(t[i].getAttribute("data-adspot-id")===e)return t[i].innerHTML}function E(e){var t=P[e].controller,n=null===t||void 0===t?void 0:t.getRawRes();n&&d.Network.callSyncURLs(n)}function A(e){var t=P[e].controller,n=null===t||void 0===t?void 0:t.getRawRes();n&&d.Network.callSyncIFrameURLs(n)}function T(e){var t=P[e].controller,n=null===t||void 0===t?void 0:t.getRawRes();n&&d.Network.callSyncScriptURLs(n)}function C(e,t){var n,o=P[t].rendered_index,r=P[t].controller;if(r){var a=r.getLoadedAds(),d=a.slice(o),m=1===r.getRawRes().viewable_impression;if(d.length>0){var _={before_render:R._makeCallbackOfBeforeRender(),adspot_id:t};m&&(_.use_wrapper=!0);var E=(null===(n=r.getPlacementInfo())||void 0===n?void 0:n.template)||w(t);if((R.options.force||{}).template&&(E=w(t)),!E)return;for(var A=new c.Template(E),T=function(e){var t,n=e.rfpAdView;(null===(t=null===n||void 0===n?void 0:n.player)||void 0===t?void 0:t.video)&&(n.player.video.ended||(R.options.video_auto_play?n.player.play():n.player.resume()))},C=function(e){var t,n=e.rfpAdView;(null===(t=null===n||void 0===n?void 0:n.player)||void 0===t?void 0:t.video)&&(n.player.video.ended||n.player.pause())},I=0;I<d.length&&I<e.length;I++){var O=void 0,k=function(e){return(0,p.implementsAdInfoModelObjectPublic)(e)?e.ad_id:void 0}(d[I]),U=e[I],B=b(d[I]);if(B){var S=function(e){return e instanceof h.VASTModel?e:h.VAST.parse(e.vast_xml)}(d[I]),N=v.AdElementAttributeParser.parse(U);O=new f.VideoAdView(U,S,A,N),f.VideoAdView.loadStyles()}else O=new l.AdView(U,A,_);var L=r.showAd(O,k);if(B&&L){var j=L,M=j.querySelector("video");M instanceof HTMLVideoElement&&(s.Util.on("enter",T),s.Util.on("exit",C),M.rfpAdView=O,i.InViewObserver.addElement(M,"video-play"),!0)}if(O.showed&&L){g(L);var V=function(e){return e instanceof HTMLElement?e:e.length>0?e[e.length-1].parentElement:null}(L);V instanceof HTMLElement&&(m?(L.rfpNotifyImpression=function(e,t){return function(){r.notifyImp(e,t)}}(k,V),L instanceof HTMLElement?i.InViewObserver.addElement(L,"viewable-impression"):L instanceof HTMLCollection&&i.InViewObserver.addElement(L[0],"viewable-impression")):r.notifyImp(k,V))}}}else{var F=r.getRawRes();if(!s.Util.isObject(F))return void y();var x=F.passback_tag;if(!x)return void y();s.Util.forEach(e,function(e){var t=new u.PassbackAdView(e,x);g(r.showAd(t))})}P[t].rendered_index=a.length}}function I(e,t){return function(o){if(o)return void y();C(e,t),n(t),E(t),A(t),T(t)}}function O(){for(var t,n=e(),o=[],i={},r=n.length,a=0;a<r;a++){var l=n[a],d=l.getAttribute("data-rfp-adspot-id");d&&(s.Util.isArray(i[d])||(i[d]=[],o.push(d)),i[d].push(l))}for(var u=o.length,a=0;a<u;a++){var d=o[a],c=i[d];P[d]={},P[d].rendered_index=0,P[d].controller=k({adspot_id:d,device_id:R.options.device_id,data:R.options.data}),null===(t=P[d].controller)||void 0===t||t.loadAds(I(c,d))}}function k(e){return R.options.offline?new m.OfflineInfeedAdController(e):new a.AdController(e)}function U(e,t){"IntersectionObserver"in window?new IntersectionObserver(function(e,n){e.forEach(function(e){e.isIntersecting&&(n.unobserve(e.target),t())})},{rootMargin:"0px"}).observe(e):(s.Util.on("enter",function(e){i.InViewObserver.removeElement(e,"lazy-loading"),_(),t()}),i.InViewObserver.addElement(e,"lazy-loading"))}var R={},P={};R.options={video_auto_play:!0};var B=!0;return R._makeCallbackOfBeforeRender=function(){if(s.Util.isFunction(R.options.before_render))return R.options.before_render;var e={title_len:parseInt(""+R.options.title_length,10),desc_len:parseInt(""+R.options.description_length,10),advertiser_len:parseInt(""+R.options.displayed_advertiser_length,10),force:R.options.force||{}};return function(t,n){var o=n.title_length||e.title_len,i=n.description_length||e.desc_len,r=n.displayed_advertiser_length||e.advertiser_len;return e.force.title_length&&e.title_len&&(o=e.title_len),e.force.description_length&&e.desc_len&&(i=e.desc_len),e.force.displayed_advertiser_length&&e.advertiser_len&&(r=e.advertiser_len),(o||i||r)&&(r<11&&(r=11),t.title&&o<t.title.length&&(t.title=t.title.substr(0,o-1)+"\u2026"),t.description&&i<t.description.length&&(t.description=t.description.substr(0,i-1)+"\u2026"),t.displayed_advertiser&&r<t.displayed_advertiser.length&&(t.displayed_advertiser=t.displayed_advertiser.substr(0,r-1)+"\u2026")),t}},R.run=function(e){if(s.Util.isObject(e)&&(R.options=s.Util.extend(R.options,e)),B&&(_(),B=!1),(null===e||void 0===e?void 0:e.lazy_loading)instanceof HTMLElement){U(e.lazy_loading,O)}else R.options.immediately?O():s.Util.waitDomReady(O)},R.lazyLoading=function(t,n){n||(n={});var o=function(){if(t instanceof HTMLElement)return t;var n=e()[0];return n instanceof HTMLElement?n.parentElement:void 0}();o instanceof HTMLElement&&(n.lazy_loading=o),R.run(n)},R.reloadAds=function(e){var n=0;for(var i in P){var r=function(o){if(Object.prototype.hasOwnProperty.call(P,o)){var i=t(o);if(0===i.length)return{value:void 0};var r=function(){var e;null===(e=P[o].controller)||void 0===e||e.loadAds(I(i,o))};if(e&&e.lazy_loading){var s=i[0].parentElement;s instanceof HTMLElement&&U(s,r)}else r();n++}}(i);if("object"===o(r))return r.value}if(0===n)return void R.run(e)},R.lazyReloading=function(){var t=function(){var t=e()[0];if(t instanceof HTMLElement)return t.parentElement}();R.reloadAds({lazy_loading:t})},R}()},{"../rfp-common/ad_element_attribute":2,"../rfp-common/in_view_observer":9,"../rfp-common/rfp":12,"../rfp-common/util":13,"./ad_controller":15,"./ad_info_model":16,"./ad_view":17,"./network":19,"./offline_ad_controller":20,"./passback_ad_view":21,"./template":23,"./vast":24,"./video-ad-view":25}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Network=void 0;var o=e("../rfp-common/network_ad"),i=e("../rfp-common/rfp"),r=e("../rfp-common/util"),s=e("./ad_info_model"),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.fetchInFeedAds=function(e,t,n,o){var i=this.buildInFeedAdRequestUrl(e,t,o);this.fetchAds(i,e,s.AdInfoModel,n,o)},
t.buildInFeedAdRequestUrl=function(e,t,n){var o,s=i.RFP.Common.Config;try{o=parent.document.URL}catch(e){o=document.referrer}var a=["adspot_id="+encodeURIComponent(e),"ad_type="+s.ad_type.infeed,"sequence="+t,"cachebuster="+this.makeCacheBuster(),"sdk_version="+s.version,"media_url="+encodeURIComponent(o)];if(r.Util.isObject(n)){if("string"==typeof n.deviceId){var l=btoa(unescape(encodeURIComponent(n.deviceId)));a.push("audience_id="+encodeURIComponent(l)),a.push("audience_id_type=0")}if(r.Util.isObject(n.customData)){var d=n.customData;Object.keys(d).forEach(function(e){var t,n;if(!/^[0-9a-z_]+$/.test(e))return void(null===(t=console.warn)||void 0===t||t.call(console,"SKIP: Invalid data key: ["+e+"]"));var o=d[e];if(o instanceof Array)o.forEach(function(t){var n=encodeURIComponent("custom["+e+"]"),o=encodeURIComponent(String(t));a.push(n+"="+o)});else{if(r.Util.isObject(o))return void(null===(n=console.warn)||void 0===n||n.call(console,"SKIP: Invalid data value: "+o.toString()+" "+JSON.stringify(o)));var i=encodeURIComponent("custom["+e+"]"),s=encodeURIComponent(String(o));a.push(i+"="+s)}})}}return this.buildAdRequestUrl(a)},t}(o.NetworkAd);n.Network=l},{"../rfp-common/network_ad":10,"../rfp-common/rfp":12,"../rfp-common/util":13,"./ad_info_model":16}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.OfflineInfeedAdController=void 0;var o=e("./ad_controller"),i=e("./placement_info_model"),r=e("../rfp-common/util"),s=e("./ad_info_model"),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.loadAds=function(e){var t=this.spotId,n={deviceId:this.deviceId,customData:this.customData},o=document.getElementById("rfp-ad-response-"+t);if(o&&"SCRIPT"===o.tagName&&"application/json"===o.type){var a=null===o||void 0===o?void 0:o.textContent;if(a){var l=r.Util.jsonParse(a),d=l.items,u=r.Util.map(d,function(e){return new s.AdInfoModel(e,t,n)}),c=new i.PlacementInfoModel(null!==l&&void 0!==l?l:{},t);this.loadedAds=this.loadedAds.concat(u),this.requestSequence++,this.placementInfo=c,this.rawRes=l}}null===e||void 0===e||e(null)},t}(o.AdController);n.OfflineInfeedAdController=l},{"../rfp-common/util":13,"./ad_controller":15,"./ad_info_model":16,"./placement_info_model":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PassbackAdView=void 0;var o=function(){function e(e,t){this.showed=!1,this.el=e,this.tag=t,this.showed=!1}return e.prototype.show=function(){if(!this.el.parentNode)return void(window.console&&"function"==typeof console.info&&console.info("The ad place not found. Multiple loading tag may have been placed at same page."));var e=this.buildHtmlDomList(this.tag),t=this.swapTagToAd(e);return this.showed=!0,t},e.prototype.buildHtmlDomList=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},e.prototype.swapTagToAd=function(e){for(var t,n,o,i,r,s=e.length,a=!1,l=0;l<s;l++){var d=e[l];if("script"===d.tagName.toLowerCase()){a=!0;break}if(d.getElementsByTagName("script").length>0){a=!0;break}}if(a){var u=document.createElement("iframe");u.onload=function(){var e,t,n,o,i=null!==(t=null===(e=u.contentWindow)||void 0===e?void 0:e.document.documentElement.scrollHeight)&&void 0!==t?t:0;i>0&&(u.height=""+i);var r=null!==(o=null===(n=u.contentWindow)||void 0===n?void 0:n.document.documentElement.scrollWidth)&&void 0!==o?o:0;r>0&&(u.width=""+r),r>0&&i>0&&window.context&&window.context.requestResize&&window.context.requestResize(r,i)},u.width="100%",u.frameBorder="0",u.scrolling="no",u.marginWidth="0",u.marginHeight="0",u.src="javascript:false",null===(t=this.el.parentNode)||void 0===t||t.insertBefore(u,this.el);var c="<!DOCTYPE html>";c+="<html>",c+="<head>",c+='<meta charset="UTF-8" />',c+='<base target="_top" />',c+="</head>",c+="<body>",c+="<script>inDapIF = true;<\/script>";for(var l=0;l<s;l++){var p=e[l];c+=p.outerHTML}c+="</body>",c+="</html>";var f=null===(n=u.contentWindow)||void 0===n?void 0:n.document;f&&(f.open(),f.write(c),f.close()),r=u}else for(var l=0;l<s;l++){var p=e[l];null===(o=this.el.parentNode)||void 0===o||o.insertBefore(p.cloneNode(!0),this.el)}return null===(i=this.el.parentNode)||void 0===i||i.removeChild(this.el),r},e}();n.PassbackAdView=o},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PlacementInfoModel=void 0;var o=e("../rfp-common/util"),i=function(){function e(e,t){this.info=this.store(e,t)}return e.prototype.toObject=function(){return this.info},e.prototype.store=function(t,n){var i={};return o.Util.forEach(e.keys,function(e){i[e]=t[e]}),i.adspot_id=n,i},e.keys=["adspot_id","template","title_length","description_length","displayed_advertiser_length"],e}();n.PlacementInfoModel=i},{"../rfp-common/util":13}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Template=void 0;var o=function(){function e(e){this.templateStr=e,this.tagOpen="{{",this.tagClose="}}"}return e.prototype.render=function(e){var t=this.templateStr;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t=t.replace(new RegExp(this.tagOpen+n+this.tagClose,"g"),e[n]));return t},e}();n.Template=o},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VASTModel=n.VASTAdWrapperModel=n.VASTAdModel=n.VASTAdInLineModel=n.VAST=n.TrackingEventsUtil=void 0;var o=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(){function e(){this.trackingEvents={},this.ads=[]}return e.parse=function(t){var n=new e;return n.adId=t.getAttribute("AdID"),n.creativeType=e.getCreativeType(t),n.trackingEvents=e.getTrackingEvents(t),n.ads=e.getAds(n.creativeType,t),n},e.getCreativeType=function(e){return e.getElementsByTagName("Linear").length>0?"LinearAds":e.getElementsByTagName("NonLinearAds").length>0?"NonLinearAds":e.getElementsByTagName("CompanionAds").length>0?"CompanionAds":void 0},e.getAds=function(t,n){if("LinearAds"===t)return e.getLinearAds(n);if("NonLinearAds"===t)return e.getNonLinearAds(n);if("CompanionAds"===t)return e.getCompanionAds(n);throw new Error("Unknown ads type")},e.getLinearAds=function(e){var t=this,n=e.getElementsByTagName("Linear");return 0===n.length?[]:[].slice.call(n).map(function(e){var n={},o=t.getMediaFiles(e),i=o[0];n.width=+i.width,n.height=+i.height,n.creativeType=i.type,n.content=i.content;var r=t.getVideoClicks(e);return n.clickThrough=r.clickThrough,n})},e.getNonLinearAds=function(e){var t=[],n=e.getElementsByTagName("NonLinear");return 0===n.length?[]:(Array.prototype.forEach.call(n,function(e){var n,o,i,r,s,a={};a.width=+(null!==(n=e.getAttribute("width"))&&void 0!==n?n:0),a.height=+(null!==(o=e.getAttribute("height"))&&void 0!==o?o:0);var l=e.getElementsByTagName("StaticResource");if(l){var d=l[0];a.creativeType=null!==(i=d.getAttribute("creativeType"))&&void 0!==i?i:"",a.content=null===(r=d.textContent)||void 0===r?void 0:r.trim();var u=e.getElementsByTagName("NonLinearClickThrough");u&&(a.clickThrough=null===(s=u[0].textContent)||void 0===s?void 0:s.trim(),t.push(a))}}),t)},e.getCompanionAds=function(e){var t=[],n=e.getElementsByTagName("Companion");return n?(Array.prototype.forEach.call(n,function(e){var n,o,i,r={},s=e.getElementsByTagName("StaticResource");if(0!==s.length){r.type=null!==(n=s[0].getAttribute("type"))&&void 0!==n?n:"",r.content=null===(o=s[0].textContent)||void 0===o?void 0:o.trim();var a=e.getElementsByTagName("CompanionClickThrough");0!==a.length&&(r.clickThrough=null===(i=a[0].textContent)||void 0===i?void 0:i.trim(),t.push(r))}}),t):[]},e.getTrackingEvents=function(e){var t=e.querySelectorAll("TrackingEvents Tracking");if(!t)return{};var n={};return Array.prototype.forEach.call(t,function(e){var t,o=e.getAttribute("event");if(o){var i=null===(t=e.textContent)||void 0===t?void 0:t.trim();if(i){var r=function(){return"progress"===o?u.Progress.generateKey(e):o}();n[r]||(n[r]=[]),n[r].push(i)}}}),n},e.getMediaFiles=function(e){var t=e.querySelector("MediaFiles");if(!t)return[];var n=t.getElementsByTagName("MediaFile");return[].slice.call(n).map(function(e){var t,n,o,i,r,s={};return s.delivery=null!==(t=e.getAttribute("delivery"))&&void 0!==t?t:void 0,s.width=+(null!==(n=e.getAttribute("width"))&&void 0!==n?n:0),s.height=+(null!==(o=e.getAttribute("height"))&&void 0!==o?o:0),s.type=null!==(i=e.getAttribute("type"))&&void 0!==i?i:void 0,s.content=null===(r=e.textContent)||void 0===r?void 0:r.trim(),s})},e.getVideoClicks=function(e){var t,n={},o=e.getElementsByTagName("VideoClicks")[0];if(!o)return{};var i=o.getElementsByTagName("ClickThrough")[0];n.clickThrough=null===(t=null===i||void 0===i?void 0:i.textContent)||void 0===t?void 0:t.trim();var r=o.getElementsByTagName("ClickTracking");return n.clickTracking=[].slice.call(r).map(function(e){var t,n;return null!==(n=null===(t=e.textContent)||void 0===t?void 0:t.trim())&&void 0!==n?n:""}),n},e}(),r=function(){function e(){this.id=null,this.sequence=null,this.impressions=[],this.errors=[],this.creatives=[]}return e.parse=function(e){var t=e.children[0];if("InLine"===(null===t||void 0===t?void 0:t.tagName))return s.parse(t);if("Wrapper"===(null===t||void 0===t?void 0:t.tagName))return a.parse(t);throw new TypeError("Unknown VAST Ad type")},e.getId=function(e){var t,n;return null!==(n=null===(t=e.parentElement)||void 0===t?void 0:t.getAttribute("id"))&&void 0!==n?n:null},e.getSequence=function(e){var t,n,o=null!==(n=null===(t=e.parentElement)||void 0===t?void 0:t.getAttribute("sequence"))&&void 0!==n?n:"",i=parseInt(o,10);return Number.isNaN(i)?null:i},e.getImpressions=function(e){var t=e.getElementsByTagName("Impression");if(!t)return[];var n=[];return Array.prototype.forEach.call(t,function(e){var t,o=null===(t=e.textContent)||void 0===t?void 0:t.trim();o&&n.push(o)}),n},e.getErrors=function(e){var t=e.getElementsByTagName("Error");if(!e)return[];var n=[];return Array.prototype.forEach.call(t,function(e){var t,o=null===(t=e.textContent)||void 0===t?void 0:t.trim();o&&n.push(o)}),n},e.getCreatives=function(e){var t=[],n=e.querySelectorAll("Creatives > Creative");return Array.prototype.forEach.call(n,function(e){t.push(i.parse(e))}),t},e}();n.VASTAdModel=r;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.parse=function(e){var n=new t;return n.id=this.getId(e),n.sequence=this.getSequence(e),n.impressions=this.getImpressions(e),n.errors=this.getErrors(e),n.creatives=this.getCreatives(e),n},t}(r);n.VASTAdInLineModel=s;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uri="",t.root=void 0,t}return o(t,e),t.parse=function(e){var n,o,i=new t;i.id=this.getId(e),i.sequence=this.getSequence(e),i.impressions=this.getImpressions(e),i.errors=this.getErrors(e),i.creatives=this.getCreatives(e);var r=e.querySelector("VASTAdTagURI");return i.uri=null!==(o=null===(n=null===r||void 0===r?void 0:r.textContent)||void 0===n?void 0:n.trim())&&void 0!==o?o:"",i},t}(r);n.VASTAdWrapperModel=a;var l=function(){function e(){this.ads=[]}return e.parse=function(t){var n,o=new e;o.version=null!==(n=e.getVersion(t))&&void 0!==n?n:void 0;var i=t.getElementsByTagName("Ad"),s=[];return Array.prototype.forEach.call(i,function(e){s.push(r.parse(e))}),o.ads=s,o},e.getVersion=function(e){return e.getAttribute("version")},e.prototype.getAllImpressions=function(){var e=[];if(this.ads.length>0){var t=this.ads[0];e=e.concat(t.impressions),t instanceof a&&t.root&&(e=e.concat(t.root.getAllImpressions()))}return e},e.prototype.getAd=function(){var e,t=void 0;if(this.ads.length>0){var n=this.ads[0];n instanceof s?t=n:n instanceof a&&(t=null===(e=n.root)||void 0===e?void 0:e.getAd())}return t},e.prototype.getAds=function(){var e,t;if(0===this.ads.length)return[];var n=this.ads[0];return n instanceof a?null!==(t=null===(e=n.root)||void 0===e?void 0:e.getAds())&&void 0!==t?t:[]:this.ads.filter(function(e){return e instanceof s}).sort(function(e,t){return e.sequence===t.sequence?0:null===e.sequence&&null!==t.sequence?1:null!==e.sequence&&null===t.sequence?-1:e.sequence-t.sequence})},e}();n.VASTModel=l;var d=function(){function e(){}return e.parse=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/xml");return l.parse(n.documentElement)},e}();n.VAST=d;var u=function(){function e(){}var t;return e.Progress=(t=function(){function e(){}return e.generateKey=function(e){var t=e.getAttribute("offset");return this.KEY_PREFIX+t},e.isOwnKey=function(e){return e.startsWith(this.KEY_PREFIX)},e.getOffsetFromKey=function(e){return e.substring(this.KEY_PREFIX.length)},e.translateOffsetToSeconds=function(e,t){if(e.endsWith("%")){return t*(Number(e.substring(0,e.length-1))/100)}var n=e.match(/^(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?$/);if(n){var o=n[1],i=n[2],r=n[3],s=n[4];return 60*Number(o)*60+60*Number(i)+Number(r)+(Number(s)||0)/1e3}return NaN},e}(),t.KEY_PREFIX="progress\t",t),e}();n.TrackingEventsUtil=u},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VideoAdView=void 0;var o=e("../rfp-common/rfp"),i=e("../rfp-common/util"),r=e("./template"),s=e("./video");o.RFP.InFeed=void 0===o.RFP.InFeed?{}:o.RFP.InFeed;var a=o.RFP.Common.Config,l=function(){function e(e,t,n,o){this.el=e,this.videoAd=t,this.template=null!==n&&void 0!==n?n:new r.Template("<div>{{creative_block_element}}</div>"),this.options=i.Util.isObject(o)?o:{},this.showed=!1}return e.loadStyles=function(){if(!document.getElementById("rfp-video-ad-style")){var e=a.protocol,t=a.host.assets;if(!t)throw new Error("Asset host not defined");var n=document.createElement("link");n.id="rfp-video-ad-style",n.rel="stylesheet";var o=i.Util.isSmartPhone()?"player-mobile":"player";n.href=e+"//"+t+"/"+o+".css";var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},e.prototype.show=function(e,t){if(void 0===t&&(t={}),!this.el.parentNode)return void(window.console&&"function"==typeof console.info&&console.info("The ad place not found. Multiple loading tag may have been placed at same page."));i.Util.isFunction(this.options.before_render)&&(e=this.options.before_render(e,t));var n=i.Util.extend({},e);n.creative_block_element='<div class="rfp-creative-block-element rfp-video-ad-view"><div class="rfp-video-area"><video muted playsinline></video><div class="rfp-video-control-panel"><div class="rfp-video-time"><span class="rfp-video-remaining">00:00</span> / <span class="rfp-video-duration">00:00</span></div><div class="rfp-video-seek-bar"><span class="rfp-video-progress"></span></div><div class="rfp-video-button-container"><button class="rfp-video-button rfp-video-play-button"><img /></button><button class="rfp-video-button rfp-video-volume-button"><img /></button><button class="rfp-video-button rfp-video-fullscreen-button"><img /></button></div></div><div class="rfp-video-cover"><ul><li><button class="rfp-video-replay-button"><img /><span>Replay</span></button></li><li><button class="rfp-video-navigate-button"><img /><span>Launch</span></button></li></ul></div></div><button class="rfp-video-close-button"><img /></button><button class="rfp-video-optout-button"><img /></button></div>';var o=this.template.render(n),r=this.buildHtmlDomList(o),a=this.swapTagToAd(r),l=this.options;this.player=new s.Player(this.videoAd,l);var d=null===a||void 0===a?void 0:a.querySelector(".rfp-video-ad-view");return this.player.attach(d),this.showed=!0,a},e.prototype.buildHtmlDomList=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},e.prototype.swapTagToAd=function(e){var t,n,o=null===(t=this.el.parentNode)||void 0===t?void 0:t.insertBefore(e[0].cloneNode(!0),this.el);return null===(n=this.el.parentNode)||void 0===n||n.removeChild(this.el),o||void 0},e}();n.VideoAdView=l},{"../rfp-common/rfp":12,"../rfp-common/util":13,"./template":23,"./video":26}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var o=e("../rfp-common/rfp"),i=e("../rfp-common/network_base"),r=e("../rfp-common/util"),s=e("./vast"),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),i=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o},d=o.RFP.Common.Config,u=r.Util.throttle,c=r.Util.emit,p=r.Util.on,f=r.Util.one,v=r.Util.off,h=function(e){e=Math.floor(e);var t=Math.floor(e/60),n=e%60;return("0"+t).slice(-2)+":"+("0"+n).slice(-2)},m=function(e){return d.protocol+"//"+d.host.assets+"/"+e},y=function(){function e(e){this.player=e}return e.prototype.onAttach=function(){this.player.playButton.getElementsByTagName("img")[0].src=m("play.png"),this.player.volumeButton.getElementsByTagName("img")[0].src=m("volume_up.png"),this.player.fullscreenButton.getElementsByTagName("img")[0].src=m("fullscreen.png"),this.player.replayButton.getElementsByTagName("img")[0].src=m("replay.png"),this.player.navigateButton.getElementsByTagName("img")[0].src=m("launch.png"),this.player.closeButton.getElementsByTagName("img")[0].src=m("close.png"),this.player.optoutButton.getElementsByTagName("img")[0].src=m("optout.png")},e.prototype.onVideoCanPlay=function(){this.player.durationText.innerHTML=h(this.player.video.duration),this.player.remainingText.innerHTML=h(this.player.video.duration),this.syncMuteState()},e.prototype.onVideoPlaying=function(){this.player.playButton.getElementsByTagName("img")[0].src=m("pause.png")},e.prototype.onVideoPause=function(){this.player.playButton.getElementsByTagName("img")[0].src=m("play.png")},e.prototype.onVideoEnded=function(){this.player.progress.style.width="100%",this.hideControls(),this.player.cover.style.visibility="visible"},e.prototype.onVideoClicked=function(){},e.prototype.onVideoEnter=function(){this.showControls()},e.prototype.onVideoLeave=function(){this.hideControls()},e.prototype.onVideoHover=function(){this.showControls()},e.prototype.onReplayButtonClicked=function(){this.player.cover.style.visibility="hidden"},e.prototype.onMuteButtonClicked=function(){this.syncMuteState()},e.prototype.onFullscreenButtonClicked=function(){this.fullscreen()},e.prototype.onCloseButtonClicked=function(){this.player.dismiss()},e.prototype.onOptoutButtonClicked=function(){this.player.mute(),this.player.navigateToOptoutPage()},e.prototype.onTimeUpdated=function(){this.player.remainingText.innerHTML=h(this.player.video.duration-this.player.video.currentTime),this.syncProgress()},e.prototype.showControls=function(e){var t=this;this.player.video.ended||(this.player.controls.style.visibility="visible",this.timerId&&(clearTimeout(this.timerId),this.timerId=void 0),e||(this.timerId=window.setTimeout(function(){t.hideControls()},3e3)))},e.prototype.hideControls=function(){this.player.controls.style.visibility="hidden",this.timerId&&(clearTimeout(this.timerId),this.timerId=void 0)},e.prototype.fullscreen=function(){this.player.video.webkitRequestFullscreen?this.player.video.webkitRequestFullscreen():this.player.video.mozRequestFullScreen?this.player.video.mozRequestFullScreen():this.player.video.msRequestFullscreen?this.player.video.msRequestFullscreen():this.player.video.requestFullscreen?this.player.video.requestFullscreen():console.log("No Fullscreen API")},e.prototype.syncMuteState=function(){var e,t=null===(e=this.player.volumeButton)||void 0===e?void 0:e.querySelector("img");t&&(this.player.video.muted?t.src=m("volume_off.png"):t.src=m("volume_up.png"))},e.prototype.syncProgress=function(){this.player.progress.style.width=this.player.video.currentTime/this.player.video.duration*100+"%"},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onAttach=function(){e.prototype.onAttach.call(this)},t.prototype.onVideoCanPlay=function(){this.syncMuteState()},t.prototype.onVideoPlaying=function(){},t.prototype.onVideoPause=function(){},t.prototype.onVideoEnded=function(){this.player.progress.style.width="100%",this.player.cover.style.visibility="visible"},t.prototype.onVideoClicked=function(){this.player.mute(),this.player.navigateToLandingPage()},t.prototype.onVideoEnter=function(){},t.prototype.onVideoLeave=function(){},t.prototype.onVideoHover=function(){},t.prototype.onReplayButtonClicked=function(){e.prototype.onReplayButtonClicked.call(this)},t.prototype.onMuteButtonClicked=function(){e.prototype.onMuteButtonClicked.call(this)},t.prototype.onFullscreenButtonClicked=function(){e.prototype.onFullscreenButtonClicked.call(this)},t.prototype.onCloseButtonClicked=function(){e.prototype.onCloseButtonClicked.call(this)},t.prototype.onOptoutButtonClicked=function(){e.prototype.onOptoutButtonClicked.call(this)},t.prototype.onTimeUpdated=function(){this.syncProgress()},t}(y),b=function(){function e(e,t){this.trackingEvents={},this.progressEvent={},this.sentImpression=!1,this.sentViewableImpression=!1,this.behavior=r.Util.isSmartPhone()?new g(this):new y(this),this.model=e,this.adsIterator=e.getAds()[Symbol.iterator](),this.options=r.Util.isObject(t)?t:{}}return e.prototype.attach=function(e){e&&(this.targetElement=e,this.bindElements(e),r.Util.isSmartPhone()&&r.Util.isTruthyString(this.options.videoCloseButton)?this.closeButton.style.display="inline-block":this.closeButton.style.display="none",r.Util.isSmartPhone()&&r.Util.isTruthyString(this.options.videoOptoutButton)?this.optoutButton.style.display="inline-block":this.optoutButton.style.display="none",this.behavior.onAttach(),this.setupPlayerEventHandler(e),this.playNextTrack())},e.prototype.playNextTrack=function(){var e,t,n=this,o=this.adsIterator.next();if(this.options.debug&&console.log(o),o.done&&"none"===this.getVideoLoopOption()){if(this.options.videoOnEnded){var r=this.video.closest(".rfp-video-ad-view"),s=this.options.videoOnEnded;window[s](r)}}else{var a=this.targetElement;if(this.firstTime=!0,this.completed=!1,this.timerId=void 0,this.timelineEvent={start:0,firstQuartile:void 0,midpoint:void 0,thirdQuartile:void 0,complete:void 0},o.done||(this.currentAd=o.value,this.sentImpression=!1,this.sentViewableImpression=!1),this.currentAd&&(this.setupVideoResource(a,this.currentAd),this.setupNavigation(this.currentAd)),!o.done){var d=null!==(t=null===(e=this.currentAd)||void 0===e?void 0:e.impressions)&&void 0!==t?t:[];this.options.debug&&console.log("impressionUrls: ",d),f("impression",function(){d.forEach(function(e){i.NetworkBase.sendRequest(e)})}),f("viewableImpression",function(){})}var u=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete"],h=["resume","pause","mute","unmute","fullscreen","exitFullscreen"];if(l(u,h,["progress"]).forEach(function(e){v(e)}),!o.done){this.trackingEvents=function(){var e,t,o,i=null===(t=null===(e=n.currentAd)||void 0===e?void 0:e.creatives)||void 0===t?void 0:t[0];return null!==(o=null===i||void 0===i?void 0:i.trackingEvents)&&void 0!==o?o:{}}(),this.options.debug&&console.log("trackingEvents: ",this.trackingEvents);var m=function(e){var t=n.options.debug;return function(){var o=n.trackingEvents[e];t&&console.log(e,o),o&&o.forEach(function(e){i.NetworkBase.sendRequest(e)})}};u.forEach(function(e){f(e,m(e))}),h.forEach(function(e){p(e,m(e))}),p("progress",function(e){n.progressEvent[e].forEach(function(e){i.NetworkBase.sendRequest(e)})}),c("creativeView",this)}this.video.play()}},e.prototype.bindElements=function(e){this.video=e.getElementsByTagName("video")[0],this.options.debug&&this.debug(),this.controls=e.getElementsByClassName("rfp-video-control-panel")[0],this.progress=this.controls.getElementsByClassName("rfp-video-progress")[0],this.durationText=this.controls.getElementsByClassName("rfp-video-duration")[0],this.remainingText=this.controls.getElementsByClassName("rfp-video-remaining")[0],this.playButton=this.controls.getElementsByClassName("rfp-video-play-button")[0],this.volumeButton=this.controls.getElementsByClassName("rfp-video-volume-button")[0],this.fullscreenButton=this.controls.getElementsByClassName("rfp-video-fullscreen-button")[0],this.closeButton=e.getElementsByClassName("rfp-video-close-button")[0],this.optoutButton=e.getElementsByClassName("rfp-video-optout-button")[0],this.cover=e.getElementsByClassName("rfp-video-cover")[0],this.replayButton=this.cover.getElementsByClassName("rfp-video-replay-button")[0],this.navigateButton=this.cover.getElementsByClassName("rfp-video-navigate-button")[0]},e.prototype.setupPlayerEventHandler=function(e){var t=this;e.addEventListener("mouseenter",function(){t.behavior.onVideoEnter()}),e.addEventListener("mouseleave",function(){t.behavior.onVideoLeave()}),e.addEventListener("mousemove",u(function(){t.behavior.onVideoHover()},100)),this.video.addEventListener("click",function(){t.behavior.onVideoClicked()}),this.video.addEventListener("canplay",function(){t.handleCanPlay()}),this.video.addEventListener("play",function(){t.handlePlay()}),this.video.addEventListener("playing",function(){t.handlePlaying()}),this.video.addEventListener("pause",function(){t.handlePause()}),this.video.addEventListener("ended",function(){t.handleEnded()}),this.video.addEventListener("timeupdate",function(){t.handleTimeUpdate()}),this.playButton.addEventListener("click",function(){t.togglePlayState()}),this.volumeButton.addEventListener("click",function(){t.toggleMuted()}),this.fullscreenButton.addEventListener("click",function(){t.behavior.onFullscreenButtonClicked()}),this.replayButton.addEventListener("click",function(){t.handleReplayButtonClicked()}),this.closeButton.addEventListener("click",function(){t.behavior.onCloseButtonClicked()}),this.optoutButton.addEventListener("click",function(){t.behavior.onOptoutButtonClicked()}),document.addEventListener("fullscreenerror",function(){console.log("fullscreenerror")}),document.addEventListener("fullscreenchange",function(){t.handleFullscreenChange()}),document.addEventListener("webkitfullscreenchange",function(){t.handleFullscreenChange()}),document.addEventListener("mozfullscreenchange",function(){t.handleFullscreenChange()}),document.addEventListener("MSFullscreenChange",function(){t.handleFullscreenChange()})},e.prototype.setupVideoResource=function(e,t){var n=this.extractVideoResource(t);if(!n)throw new Error("No video resource");if(this.options.videoWidth||this.options.videoHeight){if(this.options.videoWidth){var o=String(this.options.videoWidth);e.style.width=o,this.video.style.width=o}if(this.options.videoHeight){var i=String(this.options.videoHeight);e.style.height=i,this.video.style.height=i}}else e.style.width=n.width+"px",this.video.style.width=n.width+"px",e.style.height=n.height+"px",this.video.style.height=n.height+"px";this.video.src=n.content,n.clickThrough&&(this.clickThroughUrl=n.clickThrough)},e.prototype.setupNavigation=function(e){var t=this,n=this.extractCompanionResource(e);if(n){this.navigateButton.getElementsByTagName("span")[0].textContent=n.content,this.clickThroughUrl=n.clickThrough}else this.navigateButton.style.visibility="hidden";this.clickThroughUrl&&this.navigateButton.addEventListener("click",function(){t.navigateToLandingPage()})},e.prototype.play=function(){if(this.video.paused)try{this.video.play()}catch(e){console.log(e)}},e.prototype.pause=function(){this.video.paused||(this.video.pause(),c("pause",this))},e.prototype.resume=function(){!0===this.timelineEvent.start&&this.play()},e.prototype.mute=function(){this.video.muted=!0,this.behavior.onMuteButtonClicked()},e.prototype.unmute=function(){this.video.muted=!1,this.behavior.onMuteButtonClicked()},e.prototype.dismiss=function(){var e,t=this.video.closest(".rfp-video-ad-view");t instanceof HTMLElement&&(t.style.display="none",null===(e=t.parentElement)||void 0===e||e.removeChild(t))},e.prototype.debug=function(){var e=this.video;["emptied","seeking","loadstart","progress","canplay","play","playing","waiting","pause","ended","loadmetadata","loadeddata","canplaythrough","ratechange","volumechange","stalled","suspend","abort","loadend","error"].forEach(function(t){e.addEventListener(t,function(e){console.log(t,e)})})},e.prototype.navigateToLandingPage=function(){this.clickThroughUrl&&window.open(this.clickThroughUrl)},e.prototype.navigateToOptoutPage=function(){window.open(d.optout_url)},e.prototype.extractVideoResource=function(e){for(var t=e.creatives||[],n=0,o=t;n<o.length;n++){var i=o[n];if("NonLinearAds"===i.creativeType||"LinearAds"===i.creativeType){return(i.ads||[])[0]}}},e.prototype.extractCompanionResource=function(e){for(var t=e.creatives||[],n=0,o=t;n<o.length;n++){var i=o[n];if("CompanionAds"===i.creativeType){return(i.ads||[])[0]}}},e.prototype.togglePlayState=function(){this.video.paused?this.play():this.pause()},e.prototype.toggleMuted=function(){this.video.muted=!this.video.muted,this.behavior.onMuteButtonClicked(),this.video.muted?c("mute",this):c("unmute",this)},e.prototype.handleFullscreenChange=function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?c("fullscreen",this):c("exitFullscreen",this)},e.prototype.handleTimeUpdate=function(){var t=this;this.behavior.onTimeUpdated(),"number"==typeof this.timelineEvent.firstQuartile&&this.video.currentTime>=this.timelineEvent.firstQuartile&&(c("firstQuartile",this),this.timelineEvent.firstQuartile=!0),"number"==typeof this.timelineEvent.midpoint&&this.video.currentTime>=this.timelineEvent.midpoint&&(c("midpoint",this),this.timelineEvent.midpoint=!0),"number"==typeof this.timelineEvent.thirdQuartile&&this.video.currentTime>=this.timelineEvent.thirdQuartile&&(c("thirdQuartile",this),this.timelineEvent.thirdQuartile=!0),Object.keys(this.progressEvent).forEach(function(e){var n=Number(e);t.video.currentTime>=n&&(c("progress",e),delete t.progressEvent[e])}),!this.sentViewableImpression&&this.video.currentTime>=e.VIEWABLE_IMPRESSION_THRESHOLD&&(c("viewableImpression",this),this.sentViewableImpression=!0)},e.prototype.handleCanPlay=function(){var e=this;this.firstTime&&(this.timelineEvent.firstQuartile=.25*this.video.duration,this.timelineEvent.midpoint=.5*this.video.duration,this.timelineEvent.thirdQuartile=.75*this.video.duration,this.timelineEvent.complete=this.video.duration,Object.keys(this.trackingEvents).filter(function(e){return s.TrackingEventsUtil.Progress.isOwnKey(e)}).forEach(function(t){var n=s.TrackingEventsUtil.Progress.getOffsetFromKey(t),o=s.TrackingEventsUtil.Progress.translateOffsetToSeconds(n,e.video.duration);if(!(!o||o<0||o>e.video.duration)){var i=String(o);e.progressEvent[i]||(e.progressEvent[i]=[]),Array.prototype.push.apply(e.progressEvent[i],e.trackingEvents[t])}}),this.behavior.onVideoCanPlay(),this.handleReplayButtonClicked(),this.firstTime=!1)},e.prototype.handlePlay=function(){"number"==typeof this.timelineEvent.start?(this.sentImpression||(c("impression",this),this.sentImpression=!0),c("start",this),this.timelineEvent.start=!0):c("resume",this)},e.prototype.handlePlaying=function(){this.behavior.onVideoPlaying()},e.prototype.handlePause=function(){this.behavior.onVideoPause()},e.prototype.handleEnded=function(){this.behavior.onVideoEnded(),
this.timelineEvent.complete&&"number"==typeof this.timelineEvent.complete&&(c("complete",this),this.timelineEvent.complete=!0),this.completed=!0,this.playNextTrack()},e.prototype.handleReplayButtonClicked=function(){this.behavior.onReplayButtonClicked(),this.video.play()},e.prototype.getVideoLoopOption=function(){return"last"===this.options.videoLoop?"last":"none"},e.VIEWABLE_IMPRESSION_THRESHOLD=2,e}();n.Player=b},{"../rfp-common/network_base":11,"../rfp-common/rfp":12,"../rfp-common/util":13,"./vast":24}]},{},[5,8,7,6,24,25,18]);
